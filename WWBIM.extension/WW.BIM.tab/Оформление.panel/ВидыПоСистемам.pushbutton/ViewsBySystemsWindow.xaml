<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Создать 3D-виды по системам"
        Height="540" Width="420"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ShowInTaskbar="True">
    
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="MinWidth" Value="80"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Margin" Value="0,4"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Margin" Value="0,4"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Margin" Value="0,4"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Категория систем -->
        <StackPanel Grid.Row="0">
            <TextBlock Text="Категория систем:" FontWeight="SemiBold" Margin="0,0,0,4"/>
            <ComboBox x:Name="cb_category" SelectionChanged="category_changed"/>
        </StackPanel>
        
        <!-- Список систем -->
        <Border Grid.Row="1" BorderBrush="#CCCCCC" BorderThickness="1" CornerRadius="4" Margin="0,12,0,8">
            <ListBox x:Name="lb_systems" 
                     SelectionMode="Multiple"
                     BorderThickness="0"
                     ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <CheckBox Content="{Binding Name}" 
                                  IsChecked="{Binding IsSelected, Mode=TwoWay}"
                                  Margin="4,2"/>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Border>
        
        <!-- Кнопки быстрого выбора -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,12">
            <Button x:Name="btn_all" Content="Все" Click="select_all" MinWidth="70"/>
            <Button x:Name="btn_none" Content="Ничего" Click="select_none" MinWidth="70"/>
            <Button x:Name="btn_invert" Content="Инвертировать" Click="select_invert" MinWidth="100"/>
        </StackPanel>
        
        <!-- Разделитель -->
        <Separator Grid.Row="3" Margin="0,4"/>
        
        <!-- Настройки -->
        <StackPanel Grid.Row="4" Margin="0,8">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <TextBlock Text="Параметр системы:" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <ComboBox x:Name="cb_system_param" Grid.Column="1" SelectionChanged="system_param_changed"/>
                
                <TextBlock Text="Шаблон вида:" VerticalAlignment="Center" Grid.Row="1" Margin="0,0,12,0"/>
                <ComboBox x:Name="cb_template" Grid.Row="1" Grid.Column="1"/>
                
                <TextBlock Text="Префикс имени:" VerticalAlignment="Center" Grid.Row="2" Margin="0,0,12,0"/>
                <TextBox x:Name="tb_prefix" Grid.Row="2" Grid.Column="1" Text="3D_"/>
            </Grid>
            
            <CheckBox x:Name="ck_combined_view" Content="Все выбранные системы на одном виде" Margin="0,12,0,0"/>
            <CheckBox x:Name="chk_skip_filter" Content="Не создавать фильтр без необходимости" 
                      IsChecked="True" Margin="0,8,0,0"
                      ToolTip="Если в 3D-подрезку попадают только элементы нужной системы, фильтр не создаётся"/>
            <CheckBox x:Name="chk_open" Content="Открыть виды после создания"/>
        </StackPanel>
        
        <!-- Кнопки действий -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,12,0,0">
            <Button x:Name="btn_create" Content="Создать" IsDefault="True" Click="create_views" 
                    Background="#0078D4" Foreground="White" FontWeight="SemiBold"/>
            <Button x:Name="btn_cancel" Content="Отмена" IsCancel="True" Click="cancel_click"/>
        </StackPanel>
    </Grid>
</Window>
